<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button class="start-btn">Start</button>

    <button class="cart-btn">Add to cart</button>

    <p class="cart-text"></p>

    <button class="add-btn">Add</button>
    <button class="rem-btn">Remove</button>
  </body>
  <script>
    // 12a

    /*   let add = function () {
        console.log(2+3);
    } */

    /*   add();
    add(); */

    // 12b

    /* function runTwice(fun) {
        fun()
        fun()
    }

    runTwice(add) */

    // 12c/12d

    const startBtn = document.querySelector(".start-btn");

    startBtn.addEventListener("click", () => {
        oneSecond()
    });

    const oneSecond = () => {
      btn = document.querySelector(".start-btn");
      btn.innerHTML = "Loading..."; // 12d
      setTimeout(() => {
        btn.innerHTML = "Finished";
      }, 1000);
    };

    // 12e/12f

    let timerId; // 12f

    const cartBtn = document.querySelector('.cart-btn')
    cartBtn.addEventListener('click', () => {
        addToCart();
    })

    const addToCart = () => {
      clearTimeout(timerId);// cancella l'ultimo timer tramite id
      text = document.querySelector(".cart-text");
      text.innerHTML = "Added";
// ritorna un id alla funzione timer
      timerId = setTimeout(() => {
        text.innerHTML = "";
      }, 2000);
      console.log(timerId);
    };

    // 12g

    let messages = 0; //12h

    const addBtn = document.querySelector('.add-btn')
    addBtn.addEventListener('click', () => {
        addMess();
    })

    const addMess = () => {
      messages++;
    };

    const remBtn = document.querySelector('.rem-btn')
    remBtn.addEventListener('click', () => {
        removeMess();
    })

    const removeMess = () => {
      messages--;
    };

    const refreshTitle = () => {
      setInterval(function () {
        if (messages <= 0) {
          //12i
          document.title = "Document";
        } else if (document.title === `(${messages}) New messages`) {
          document.title = "Document";
        } else {
          document.title = `(${messages}) New messages`;
        }
      }, 1000);
    };

    refreshTitle();

    // 12j/12k

    // const multiply = (a, b) => {
    //   return a * b;
    // };

    // console.log(multiply(2,3));

    // 12l

    /* const countPositive = (nums) => {
        let count = 0;
        nums.forEach((num) => {
            if(num>=0){
                count++;
            }
        })
        return count;
    }
    console.log(countPositive([1,-3,5,-6, 3])) */

    //12m

    /* const addNum = (arr, num) => {
      return arr.map((value) => value + num);
    };

    console.log(addNum([1, 2, 3], 2)); */

    //12n/12o

    /* const removeEgg = (foods) => {
      let count = 0;
      return foods.filter((value) => {// filtra i cibi
        if (value === "egg" && count < 2) {// se soddisfa i requisiti
          count++;//incrementa
          return false // ritorna un false, quindi non aggiunge
        }
        return true; // ritorna true, quindi pusha in un nuovo array
      });
    };

    console.log(removeEgg(["pane", "egg", "latte", "egg", "cavolo", "egg"])); */

    //
  </script>
</html>
